<!DOCTYPE html>
<!-- Declare document type as HTML5 -->
<html lang="en">
<!-- Root HTML element with language set to English -->

<head>
<!-- Metadata and resources for the document -->
<meta charset="UTF-8" />
<!-- Set character encoding to UTF-8 -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<!-- Make page responsive on mobile devices -->
<title>fainance company</title>
<!-- Title of the webpage displayed in browser tab -->

<!-- Load EmailJS library for sending emails directly from JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
  (function(){
    // Immediately-invoked function expression (IIFE) to initialize EmailJS
    emailjs.init('JfCV6CqZydOg3lwE5'); // Initialize with EmailJS public key
  })();
</script>

<style>
  /* CSS styles for the webpage */

  body{
    background-image: url(./download.jpg);
    /* Set background image for body */
    background-repeat: no-repeat;
    /* Prevent repeated background */
    background-size: 100% 100%;
    /* Stretch image to fill entire background */
    backdrop-filter: blur(3px);
    /* Slight blur effect for content behind */
  }

  /* Define CSS variables for colors, fonts, spacing, etc. */
  :root {
    --color-white: rgba(255, 255, 255, 1);
    --color-cream-50: rgba(252, 252, 249, 1);
    --color-cream-100: rgba(255, 255, 253, 1);
    --color-gray-200: rgba(245, 245, 245, 1);
    --color-gray-300: rgba(167, 169, 169, 1);
    --color-slate-500: rgba(98, 108, 113, 1);
    --color-brown-600: rgba(94, 82, 64, 1);
    --color-charcoal-700: rgba(31, 33, 33, 1);
    --color-charcoal-800: rgba(38, 40, 40, 1);
    --color-slate-900: rgba(19, 52, 59, 1);
    --color-teal-300: rgba(50, 184, 198, 1);
    --color-teal-500: rgba(33, 128, 141, 1);
    --color-teal-600: rgba(29, 116, 128, 1);
    --color-teal-700: rgba(26, 104, 115, 1);
    --color-red-400: rgba(255, 84, 89, 1);
    --color-red-500: rgba(192, 21, 47, 1);

    --color-brown-600-rgb: 94, 82, 64;
    --color-teal-500-rgb: 33, 128, 141;
    --color-slate-900-rgb: 19, 52, 59;
    --color-red-500-rgb: 192, 21, 47;

    /* Assign variables to be used for backgrounds and text */
    --color-background: var(--color-cream-50);
    --color-surface: var(--color-cream-100);
    --color-text: var(--color-slate-900);
    --color-text-secondary: var(--color-slate-500);
    --color-primary: var(--color-teal-500);
    --color-primary-hover: var(--color-teal-600);
    --color-primary-active: var(--color-teal-700);
    --color-border: rgba(var(--color-brown-600-rgb), 0.2);
    --color-btn-primary-text: var(--color-cream-50);
    --color-error: var(--color-red-500);
    --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);

    /* Font families, sizes, and weights */
    --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    --font-size-sm: 12px;
    --font-size-base: 14px;
    --font-size-lg: 16px;
    --font-size-xl: 18px;
    --font-size-2xl: 20px;
    --font-size-3xl: 24px;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 550;
    --font-weight-bold: 600;
    --line-height-normal: 1.5;
    --line-height-tight: 1.2;

    /* Spacing variables */
    --space-4: 4px;
    --space-8: 8px;
    --space-12: 12px;
    --space-16: 16px;
    --space-20: 20px;
    --space-24: 24px;
    --space-32: 32px;

    /* Border radius and shadows */
    --radius-base: 8px;
    --radius-lg: 12px;
    --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.04), 0 2px 4px -1px rgba(0,0,0,0.02);
    --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.04), 0 4px 6px -2px rgba(0,0,0,0.02);
    --duration-normal: 250ms;
    --ease-standard: cubic-bezier(0.16,1,0.3,1);
  }

  /* Dark mode color variable overrides for preferred-color-scheme */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-gray-200-rgb: 245, 245, 245;
      --color-gray-300-rgb: 167, 169, 169;
      --color-gray-400-rgb: 119, 124, 124;
      --color-teal-300-rgb: 50, 184, 198;
      --color-red-400-rgb: 255, 84, 89;

      --color-background: var(--color-charcoal-700);
      --color-surface: var(--color-charcoal-800);
      --color-text: var(--color-gray-200);
      --color-text-secondary: rgba(var(--color-gray-300-rgb),0.7);
      --color-primary: var(--color-teal-300);
      --color-primary-hover: rgba(var(--color-teal-300-rgb),0.9);
      --color-primary-active: var(--color-teal-500);
      --color-border: rgba(var(--color-gray-400-rgb),0.3);
      --color-btn-primary-text: var(--color-slate-900);
      --color-error: var(--color-red-400);
      --color-focus-ring: rgba(var(--color-teal-300-rgb),0.4);
    }
  }

  /* Reset default margin and padding, set box sizing */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }

  /* General styles for HTML element */
  html {
    font-size: var(--font-size-base);
    font-family: var(--font-family-base);
    line-height: var(--line-height-normal);
  }

  /* Body style to center content vertically and horizontally */
  body {
    background-color: var(--color-background);
    color: var(--color-text);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: var(--space-20);
  }

  /* Container wrapping the login and signup cards */
  .login-container {
    width: 100%;
    max-width: 420px;
  }

  /* Styling the card (login/signup box) */
  .login-card {
    background-color: var(--color-surface);
    border-radius: var(--radius-lg);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-lg);
    padding: var(--space-32);
    animation: fadeIn 0.5s var(--ease-standard);
  }

  /* Animation to fade card in and translate up slightly */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Header styles for login and signup sections */
  .login-header {
    text-align: center;
    margin-bottom: var(--space-32);
  }

  /* Title styling */
  .login-title {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    line-height: var(--line-height-tight);
    color: var(--color-text);
    margin-bottom: var(--space-8);
  }

  /* Subtitle below title */
  .login-subtitle {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
  }

  /* Form groups to separate label-input combos */
  .form-group {
    margin-bottom: var(--space-20);
  }

  /* Label styling */
  .form-label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    margin-bottom: var(--space-8);
  }

  /* Inputs - email, password */
  .form-input {
    width: 100%;
    padding: var(--space-12);
    font-size: var(--font-size-base);
    font-family: var(--font-family-base);
    color: var(--color-text);
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-base);
    transition: border-color var(--duration-normal) var(--ease-standard),
                box-shadow var(--duration-normal) var(--ease-standard);
  }

  /* Input focus style */
  .form-input:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px var(--color-focus-ring);
  }

  /* Input error style */
  .form-input.error {
    border-color: var(--color-error);
  }

  /* Error message text style, hidden by default */
  .error-message {
    display: none;
    font-size: var(--font-size-sm);
    color: var(--color-error);
    margin-top: var(--space-4);
  }

  /* Show error message */
  .error-message.show {
    display: block;
  }

  /* Options section including remember me checkbox */
  .form-options {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-24);
  }

  /* Checkbox with label */
  .checkbox-group {
    display: flex;
    align-items: center;
    gap: var(--space-8);
  }

  /* Checkbox input square */
  .checkbox-input {
    width: 16px;
    height: 16px;
    cursor: pointer;
  }

  /* Label for the checkbox */
  .checkbox-label {
    font-size: var(--font-size-sm);
    color: var(--color-text);
    cursor: pointer;
  }

  /* Submit buttons style */
  .submit-btn {
    width: 100%;
    padding: var(--space-12);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-btn-primary-text);
    background-color: var(--color-primary);
    border: none;
    border-radius: var(--radius-base);
    cursor: pointer;
    transition: background-color var(--duration-normal) var(--ease-standard),
                transform var(--duration-normal) var(--ease-standard);
  }

  /* Submit button hover */
  .submit-btn:hover {
    background-color: var(--color-primary-hover);
  }

  /* Submit button active (clicked) */
  .submit-btn:active {
    background-color: var(--color-primary-active);
    transform: scale(0.98);
  }

  /* Submit button focus outline and shadow */
  .submit-btn:focus {
    outline: none;
    box-shadow: 0 0 0 3px var(--color-focus-ring);
  }

  /* Disabled submit button style */
  .submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  /* Signup link below forms */
  .signup-link {
    text-align: center;
    margin-top: var(--space-24);
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
  }

  /* Link style inside signup link */
  .signup-link a {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
    transition: color var(--duration-normal) var(--ease-standard);
  }

  /* Link hover color */
  .signup-link a:hover {
    color: var(--color-primary-hover);
  }

  /* Container for success messages */
  .success-message {
    display: none;
    padding: var(--space-12);
    background-color: rgba(var(--color-teal-500-rgb), 0.1);
    border: 1px solid var(--color-primary);
    border-radius: var(--radius-base);
    color: var(--color-primary);
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-20);
  }

  /* Show success message with animated slide down */
  .success-message.show {
    display: block;
    animation: slideDown 0.3s var(--ease-standard);
  }

  /* Slide down animation for success message */
  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive styles for small screens */
  @media (max-width: 480px) {
    .login-card {
      padding: var(--space-24);
    }

    .login-title {
      font-size: var(--font-size-2xl);
    }

    .form-options {
      flex-direction: column;
      align-items: flex-start;
      gap: var(--space-12);
    }
  }
</style>

</head>

<body>
<div class="login-container">
  <!-- The main container holding the login, signup, and OTP cards -->

  <!-- Login card - visible initially -->
  <div class="login-card" id="loginCard">
    <div class="login-header">
      <h1 class="login-title">Welcome Back</h1>
      <p class="login-subtitle">Please enter your credentials to continue</p>
    </div>

    <!-- Container to show success messages such as OTP sent confirmation -->
    <div id="successMessage" class="success-message"></div>

    <form id="loginForm" novalidate>
      <!-- Email input group -->
      <div class="form-group">
        <label for="email" class="form-label">Email Address</label>
        <input type="email" id="email" name="email" class="form-input" placeholder="you@example.com" required />
        <!-- Div to show email input error messages -->
        <div id="emailError" class="error-message"></div>
      </div>

      <!-- Password input group -->
      <div class="form-group">
        <label for="password" class="form-label">Password</label>
        <input type="password" id="password" name="password" class="form-input" placeholder="Enter your password" required />
        <!-- Div to show password input error messages -->
        <div id="passwordError" class="error-message"></div>
      </div>

      <!-- "Remember me" checkbox option -->
      <div class="form-options">
        <div class="checkbox-group">
          <input type="checkbox" id="remember" name="remember" class="checkbox-input" />
          <label for="remember" class="checkbox-label">Remember me</label>
        </div>
      </div>

      <!-- Submit button for login -->
      <button type="submit" class="submit-btn">Sign In</button>
    </form>

    <!-- Link to switch to signup form -->
    <div class="signup-link">
      Don't have an account? <a href="#" id="signupLink">Sign up</a>
    </div>
  </div>

  <!-- Signup card, hidden by default -->
  <div class="login-card" id="signupCard" style="display:none;">
    <div class="login-header">
      <h1 class="login-title">Create Account</h1>
      <p class="login-subtitle">Fill in your details to get started</p>
    </div>

    <!-- Signup success message container -->
    <div id="signupSuccessMessage" class="success-message"></div>

    <form id="signupForm" novalidate>
      <!-- Full name input -->
      <div class="form-group">
        <label for="signupName" class="form-label">Full Name</label>
        <input type="text" id="signupName" name="name" class="form-input" placeholder="John Doe" required />
        <div id="nameError" class="error-message"></div>
      </div>

      <!-- Email input -->
      <div class="form-group">
        <label for="signupEmail" class="form-label">Email Address</label>
        <input type="email" id="signupEmail" name="email" class="form-input" placeholder="you@example.com" required />
        <div id="signupEmailError" class="error-message"></div>
      </div>

      <!-- Password input -->
      <div class="form-group">
        <label for="signupPassword" class="form-label">Password</label>
        <input type="password" id="signupPassword" name="password" class="form-input" placeholder="Create a password" required />
        <div id="signupPasswordError" class="error-message"></div>
      </div>

      <!-- Confirm password input -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">Confirm Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" class="form-input" placeholder="Re-enter your password" required />
        <div id="confirmPasswordError" class="error-message"></div>
      </div>

      <!-- Submit button for creating account -->
      <button type="submit" class="submit-btn">Create Account</button>
    </form>

    <!-- Link to switch back to login -->
    <div class="signup-link">
      Already have an account? <a href="#" id="loginLink">Sign in</a>
    </div>
  </div>

  <!-- OTP card for entering verification code, hidden by default -->
  <div class="login-card" id="otpCard" style="display:none;">
    <div class="login-header">
      <h1 class="login-title">Verify OTP</h1>
      <p class="login-subtitle">Enter the 6-digit code sent to your email</p>
    </div>

    <!-- OTP verification success message -->
    <div id="otpSuccessMessage" class="success-message"></div>

    <form id="otpForm" novalidate>
      <!-- OTP input -->
      <div class="form-group">
        <label for="otpInput" class="form-label">OTP Code</label>
        <input type="text" id="otpInput" name="otp" class="form-input" placeholder="Enter 6-digit code" maxlength="6" required style="text-align:center; font-size:24px; letter-spacing:8px;" />
        <div id="otpError" class="error-message"></div>
      </div>

      <!-- Button to verify OTP -->
      <button type="submit" class="submit-btn">Verify OTP</button>
    </form>

    <!-- Link to go back to login -->
    <div class="signup-link">
      <a href="#" id="backToLogin">Back to login</a>
    </div>
  </div>
</div>

<script>
// JavaScript controlling page behavior

// Cache DOM elements for easy access
const form = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');
const loginCard = document.getElementById('loginCard');
const signupCard = document.getElementById('signupCard');
const otpCard = document.getElementById('otpCard');
const signupLink = document.getElementById('signupLink');
const loginLink = document.getElementById('loginLink');
const backToLogin = document.getElementById('backToLogin');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const emailError = document.getElementById('emailError');
const passwordError = document.getElementById('passwordError');
const successMessage = document.getElementById('successMessage');
const signupNameInput = document.getElementById('signupName');
const signupEmailInput = document.getElementById('signupEmail');
const signupPasswordInput = document.getElementById('signupPassword');
const confirmPasswordInput = document.getElementById('confirmPassword');
const nameError = document.getElementById('nameError');
const signupEmailError = document.getElementById('signupEmailError');
const signupPasswordError = document.getElementById('signupPasswordError');
const confirmPasswordError = document.getElementById('confirmPasswordError');
const signupSuccessMessage = document.getElementById('signupSuccessMessage');
const otpInput = document.getElementById('otpInput');
const otpError = document.getElementById('otpError');
const otpSuccessMessage = document.getElementById('otpSuccessMessage');

// Function to validate email format using regex pattern
function validateEmail(email) {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
}

// Show error by adding 'error' class to input and displaying error message
function showError(input, errorElement, message) {
  input.classList.add('error');
  errorElement.textContent = message;
  errorElement.classList.add('show');
}

// Clear error styles and text
function clearError(input, errorElement) {
  input.classList.remove('error');
  errorElement.textContent = '';
  errorElement.classList.remove('show');
}

// Show success message temporarily
function showSuccess(message) {
  successMessage.textContent = message;
  successMessage.classList.add('show');
  setTimeout(() => {
    successMessage.classList.remove('show');
  }, 3000);
}

// Clear errors when user modifies input fields
emailInput.addEventListener('input', () => clearError(emailInput, emailError));
passwordInput.addEventListener('input', () => clearError(passwordInput, passwordError));
signupNameInput.addEventListener('input', () => clearError(signupNameInput, nameError));
signupEmailInput.addEventListener('input', () => clearError(signupEmailInput, signupEmailError));
signupPasswordInput.addEventListener('input', () => clearError(signupPasswordInput, signupPasswordError));
confirmPasswordInput.addEventListener('input', () => clearError(confirmPasswordInput, confirmPasswordError));
otpInput.addEventListener('input', () => {
  clearError(otpInput, otpError);
  // Allow only numbers in OTP input
  otpInput.value = otpInput.value.replace(/[^0-9]/g, '');
});


// Load registered users from localStorage or empty array if none exist
function loadUsers() {
  return JSON.parse(localStorage.getItem('registeredUsers')) || [];
}
// Save updated users array to localStorage
function saveUsers(users) {
  localStorage.setItem('registeredUsers', JSON.stringify(users));
}

let registeredUsers = loadUsers();

// Function to send OTP email using EmailJS
function sendOtpEmail(name, email, otp) {
  emailjs.send('service_pu1kt2o', 'template_vrq8sws', {
    name: name,
    email: email,
    passcode: otp
  })
  .then(() => console.log('OTP email sent.'))
  .catch(e => console.error('Email fail:', e));
}

// Handle login form submit
form.addEventListener('submit', (e) => {
  e.preventDefault(); // Prevent form submission refresh

  let isValid = true;
  clearError(emailInput, emailError);
  clearError(passwordInput, passwordError);

  const email = emailInput.value.trim();
  const password = passwordInput.value.trim();

  // Validate email presence and format
  if(email === '') {
    showError(emailInput, emailError, 'Email address is required');
    isValid = false;
  } else if(!validateEmail(email)) {
    showError(emailInput, emailError, 'Please enter a valid email address');
    isValid = false;
  }

  // Validate password presence and length
  if(password === '') {
    showError(passwordInput, passwordError, 'Password is required');
    isValid = false;
  } else if(password.length < 6) {
    showError(passwordInput, passwordError, 'Password must be at least 6 characters');
    isValid = false;
  }

  if(isValid) {
    registeredUsers = loadUsers();

    // Attempt to find user with matching email and password (simple authentication)
    const user = registeredUsers.find(u => u.email === email && u.password === password);

    if(user) {
      // Generate 6-digit OTP
      const otp = Math.floor(100000 + Math.random() * 900000).toString();
      // Send OTP email
      sendOtpEmail(user.name, email, otp);
      // Show success message for OTP sent
      showSuccess(`OTP has been sent to ${email}. Please check your email.`);
      // Store OTP & user info in sessionStorage to verify later
      sessionStorage.setItem('pendingOtp', otp);
      sessionStorage.setItem('pendingUser', JSON.stringify(user));

      // After short delay, hide login/signup and display OTP verification card
      setTimeout(() => {
        loginCard.style.display = 'none';
        signupCard.style.display = 'none';
        otpCard.style.display = 'block';
      }, 1000);
    } else {
      // User not found or wrong credentials
      showError(emailInput, emailError, 'No account found. Please sign up first.');
      showError(passwordInput, passwordError, 'You entered wrong credentials or account does not exist');
    }
  }
});

// Handle signup form submit
signupForm.addEventListener('submit', (e) => {
  e.preventDefault();

  let isValid = true;
  clearError(signupNameInput, nameError);
  clearError(signupEmailInput, signupEmailError);
  clearError(signupPasswordInput, signupPasswordError);
  clearError(confirmPasswordInput, confirmPasswordError);

  const name = signupNameInput.value.trim();
  const email = signupEmailInput.value.trim();
  const password = signupPasswordInput.value.trim();
  const confirmPassword = confirmPasswordInput.value.trim();

  // Validate name presence and length
  if(name === '') {
    showError(signupNameInput, nameError, 'Full name is required');
    isValid = false;
  } else if(name.length < 2) {
    showError(signupNameInput, nameError, 'Name must be at least 2 characters');
    isValid = false;
  }

  // Validate email presence and format
  if(email === '') {
    showError(signupEmailInput, signupEmailError, 'Email address is required');
    isValid = false;
  } else if(!validateEmail(email)) {
    showError(signupEmailInput, signupEmailError, 'Please enter a valid email address');
    isValid = false;
  }

  // Validate password presence and min length
  if(password === '') {
    showError(signupPasswordInput, signupPasswordError, 'Password is required');
    isValid = false;
  } else if(password.length < 8) {
    showError(signupPasswordInput, signupPasswordError, 'Password must be at least 8 characters');
    isValid = false;
  }

  // Confirm password presence and matching check
  if(confirmPassword === '') {
    showError(confirmPasswordInput, confirmPasswordError, 'Please confirm your password');
    isValid = false;
  } else if(password !== confirmPassword) {
    showError(confirmPasswordInput, confirmPasswordError, 'Passwords do not match');
    isValid = false;
  }

  if(isValid) {
    registeredUsers = loadUsers();

    // Check if email is already registered
    if(registeredUsers.some(u => u.email === email)) {
      showError(signupEmailInput, signupEmailError, 'Email already registered. Please log in.');
      return;
    }

    // Add new user record
    registeredUsers.push({name: name, email: email, password: password});
    saveUsers(registeredUsers);

    // Show signup success message and reset form
    signupSuccessMessage.textContent = 'Account created successfully! Redirecting to login...';
    signupSuccessMessage.classList.add('show');
    signupForm.reset();

    // After delay, hide signup and show login card
    setTimeout(() => {
      signupSuccessMessage.classList.remove('show');
      signupCard.style.display = 'none';
      loginCard.style.display = 'block';
    }, 2000);
  }
});

// Event listener to switch from login to signup card on clicking "Sign up"
signupLink.addEventListener('click', e => {
  e.preventDefault();
  loginCard.style.display = 'none';
  signupCard.style.display = 'block';
});

// Event listener to switch from signup to login card on clicking "Sign in"
loginLink.addEventListener('click', e => {
  e.preventDefault();
  signupCard.style.display = 'none';
  loginCard.style.display = 'block';
});

// Handle OTP form submission for verification
document.getElementById('otpForm').addEventListener('submit', e => {
  e.preventDefault();

  clearError(otpInput, otpError);
  let isValid = true;

  const userOtp = otpInput.value.trim();
  const storedOtp = sessionStorage.getItem('pendingOtp');
  const userInfo = JSON.parse(sessionStorage.getItem('pendingUser'));

  // Validate OTP presence and length (6 digits)
  if(userOtp === '') {
    showError(otpInput, otpError, 'OTP code is required');
    isValid = false;
  } else if(userOtp.length !== 6) {
    showError(otpInput, otpError, 'OTP must be 6 digits');
    isValid = false;
  }

  if(isValid) {
    // Check if entered OTP matches stored OTP
    if(userOtp === storedOtp) {
      // Show OTP success message with user name
      otpSuccessMessage.textContent = `OTP Verified! Welcome back, ${userInfo.name}!`;
      otpSuccessMessage.classList.add('show');

      // Remove OTP data from session storage
      sessionStorage.removeItem('pendingOtp');
      sessionStorage.removeItem('pendingUser');

      // Clear OTP input field
      otpInput.value = '';

      // Redirect to details page after brief delay
      setTimeout(() => {
        window.location.href = 'detail.html';
      }, 1500);
    } else {
      // Show invalid OTP error
      showError(otpInput, otpError, 'Invalid OTP! Please try again.');
    }
  }
});

// Back to login link in OTP card - resets state and shows login form
backToLogin.addEventListener('click', e => {
  e.preventDefault();

  // Clear OTP-related storage
  sessionStorage.removeItem('pendingOtp');
  sessionStorage.removeItem('pendingUser');

  // Hide OTP card, show login card
  otpCard.style.display = 'none';
  loginCard.style.display = 'block';

  // Clear OTP input and errors
  otpInput.value = '';
  clearError(otpInput, otpError);

  // Clear success message
  otpSuccessMessage.textContent = '';
  otpSuccessMessage.classList.remove('show');
});
</script>

</body>
</html>
